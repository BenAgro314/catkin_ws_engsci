<?xml version="1.0"?>
<launch>
	<arg name="world" default="$(find offboard_py)/worlds/myhal_sim.world"/>
	<arg name="sdf" default="$(find offboard_py)/models/iris_with_imx/iris_with_imx.sdf"/>
	<!--arg name="sdf" default="$(find offboard_py)/models/iris/iris.sdf"/-->

	<node pkg="tf" type="static_transform_publisher" name="tf_baseLink_cameraPose"
        args="0 0 0 0 1.5708 0 base_link camera_pose_frame 1000"/>
	<!--arg name="sdf" default="$(find offboard_py)/models/iris_with_realsense/iris_with_realsense.sdf"/-->
	<!--arg name="vehicle" default="iris"/-->
	<!-- Include the MAVROS node with SITL and Gazebo -->
	<include file="$(find px4)/launch/mavros_posix_sitl.launch">
		<arg name="world" value="$(arg world)"/>	
		<arg name="sdf" value="$(arg sdf)"/>	
		<!--arg name="vehicle" value="$(arg vehicle)"/-->	
		<arg name="x" value="0.3"/>
		<arg name="y" value="0.1"/>
		<arg name="z" value="0"/>
		<arg name="Y" default="-1.57"/>
	</include>
	<!--param name="robot_description" textfile="$(find offboard_py)/models/iris/iris.sdf"/-->

	<!-- Our node to control the drone -->
	<node pkg="offboard_py" type="rob498_drone.py" name="rob498_drone_py" required="true" output="screen" />

	<!-- rviz -->
	<node type="rviz" name="rviz" pkg="rviz" args="-d $(find offboard_py)/rviz/offboard.rviz" />

	<node name="pose_to_tf" pkg="t265_stereo" type="tf_pub.py" output="screen"/>
	<node name="obstacle_detector" pkg="offboard_py" type="obstacle_detection.py" output="screen"/>
	<!--node name="mapping_node" pkg="t265_stereo" type="mapping.py" output="screen"/-->

	<!-- Publish a static transformation between base_link and camera_odom_frame -->
	<node pkg="tf" type="static_transform_publisher" name="base_link_to_imx219"
			args="0 0 0 0 -1.5707 1.5707 base_link imx219 1000"/>
</launch>